<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Мой сайт</title>
</head>
<body>
    <h1>Добро пожаловать на мой сайт!</h1>
    
    <form method="POST">
        <label for="observed_values">Наблюдаемые значения (через запятую):</label>
        <input type="text" id="observed_values" name="observed_values" required>
        <br><br>
        <label for="measurements">Измеренные значения (через запятую):</label>
        <input type="text" id="measurements" name="measurements" required>
        <br><br>
        <input type="submit" value="Отправить">
    </form>
    
    {% if error %}
        <p style="color: red;">{{ error }}</p>
    {% endif %}
    
    {% if chi_square is not none %}
        <h2>Результаты:</h2>
        <p><strong>Хи-квадрат (χ²):</strong> {{ chi_square }}</p>
        <p><strong>Приведенный хи-квадрат:</strong> {{ reduced_chi_square }}</p>
        <p><strong>Степени свободы:</strong> {{ degrees_of_freedom }}</p>
        <p><strong>Ожидаемое значение:</strong> {{ expected_value }}</p>
        
        <h3>Графики:</h3>
        <div>
            <h4>Наблюдаемые значения по категориям:</h4>
            <img src="data:image/png;base64,{{ plot1 }}" alt="Plot 1">
        </div>
        
        <div>
            <h4>Вклад каждой категории в χ²:</h4>
            <img src="data:image/png;base64,{{ plot2 }}" alt="Plot 2">
        </div>
        
        <h3>Формулы:</h3>
        {% for formula in formulas %}
            <div>
                <strong>{{ formula.title }}:</strong>
                <p>{{ formula.formula }}</p>
                <p>{{ formula.description }}</p>
            </div>
        {% endfor %}
        
        <h3>Подробные вычисления:</h3>
        <table border="1">
            <tr>
                <th>Категория</th>
                <th>Наблюдаемое значение</th>
                <th>Измеренные значения</th>
                <th>Вклад в χ²</th>
            </tr>
            {% for calc in calculations %}
                <tr>
                    <td>{{ calc.category }}</td>
                    <td>{{ calc.observed }}</td>
                    <td>{{ calc.measurements }}</td>
                    <td>{{ calc.contribution }}</td>
                </tr>
            {% endfor %}
        </table>
    {% endif %}
</body>
</html>
